<!-- templates/base.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}Essential Oils Dashboard{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap + Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">




  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f9fafb;
    }
    /* Top bar */
    .topbar {
      display: flex;
      align-items: center;
      background: lightcyan;
      box-shadow: 0 2px 5px rgba(0,0,0,0.08);
      padding: 0.75rem 1.25rem;
      position: fixed;
      width: 100%!important;
      top: 0;
      z-index: 1030;
    }
    .topbar h3 {
      margin: 0;
      font-weight: 600;
      color: #2c3e50;
    }







    /* Sidebar */
    .sidebar {
      position: fixed;
      top: 0;
      left: -350px; /* hidden by default */
      height: 100vh;
      width: 330px;
      background: linear-gradient(160deg, #2c3e50, #34495e);
      color: #ecf0f1;
      transition: left 0.5s ease;
      box-shadow: 2px 0 8px rgba(0,0,0,0.2);
      z-index: 1040;
      padding-top: 60px; /* space for topbar */
    }
    .sidebar.active { left: 0; }



    .sidebar a {
      display: block;
      padding: 15px 20px;
      font-size: 15px;
      color: #bdc3c7;
      text-decoration: none;
      transition: 0.2s;
      padding-left:35px;
    }
    .sidebar a.active, .sidebar a:hover {
      background: #4A9DAE;
      color: #fff;
    }

    /* Content */
    .content {
      padding: 0;
      margin-top: 10px; /* space for topbar */
    }

    /* Hamburger */
    .hamburger {
      font-size: 1.5rem;
      cursor: pointer;
      margin-right: 1rem;
      color: #2c3e50;
      transition: transform 0.5s ease;
      padding: 11px; /* extra clickable area */
      border-radius: 4px; /* optional, nice hover effect */
    }

    .hamburger:hover { transform: scale(1.1); }

    /* Overlay when sidebar open */
    .overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.3);
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease;
      z-index: 1035;
      pointer-events: none; /* let clicks go through when not active */

    }
    .overlay.active {
      opacity: 1;
      visibility: visible;
      pointer-events: auto; /* let clicks go through when not active */

    }
  </style>

  {% block styles %}{% endblock %}

</head>

<body>
  <!-- Top Bar -->
  <div class="topbar" id="menu-toggle">
    <i class="fas fa-bars hamburger"></i>
    <h3>Essential Oils Dashboard</h3>
  </div>



  <!-- Sidebar -->
  <nav id="sidebar" class="sidebar">
    <h3 class="px-4 mb-4 fs-2 fw-bold" style="color:#B3EBF2;">EO Playground</h3>

    <a href="{{ url_for('index') }}" class="{% if active_page=='index' %}active{% endif %}">
      <i class="fas fa-leaf me-2"></i> Oils
    </a>
    <a href="{{ url_for('compounds') }}" class="{% if active_page=='compounds' %}active{% endif %}">
      <i class="fas fa-flask me-2"></i> Compounds
    </a>
    <a href="{{ url_for('blends') }}" class="{% if active_page=='blends' %}active{% endif %}">
      <i class="fas fa-vial me-2"></i> Blending Lab
    </a>
    <a href="{{ url_for('properties') }}" class="{% if active_page=='properties' %}active{% endif %}">
      <i class="fas fa-heart me-2"></i> Properties
    </a>
  </nav>

  <!-- Overlay -->
  <div id="overlay" class="overlay"></div>

  <!-- Main Content -->
  <main class="content">
    {% block content %}{% endblock %}
  </main>

  <!-- Scripts -->
<script>

const topbar = document.querySelector(".topbar");
const sidebar = document.getElementById("sidebar");
const overlay = document.getElementById("overlay");

// Desktop breakpoint
function isDesktop() { return window.innerWidth >= 1024; }

let isOpen = false;
let pointerInside = false;

// Open sidebar
function openSidebar() {
  if (!isOpen) {
    sidebar.classList.add("active");
    overlay.classList.add("active");
    isOpen = true;
  }
}

// Close sidebar
function closeSidebar() {
  if (isOpen) {
    sidebar.classList.remove("active");
    overlay.classList.remove("active");
    isOpen = false;
  }
}

// Track pointer over topbar + sidebar
document.addEventListener("mousemove", e => {
  if (!isDesktop()) return;

  const rectTopbar = topbar.getBoundingClientRect();
  const rectSidebar = sidebar.getBoundingClientRect();

  const insideTopbar = e.clientX >= rectTopbar.left && e.clientX <= rectTopbar.right &&
                       e.clientY >= rectTopbar.top && e.clientY <= rectTopbar.bottom;

  const insideSidebar = e.clientX >= rectSidebar.left && e.clientX <= rectSidebar.right &&
                        e.clientY >= rectSidebar.top && e.clientY <= rectSidebar.bottom;

  const nowInside = insideTopbar || insideSidebar;

  if (nowInside && !pointerInside) openSidebar();
  if (!nowInside && pointerInside) closeSidebar();

  pointerInside = nowInside;
});

// Click toggle (all screens)
topbar.addEventListener("click", () => {
  sidebar.classList.toggle("active");
  overlay.classList.toggle("active");
  isOpen = sidebar.classList.contains("active");
});

// Overlay click closes sidebar
overlay.addEventListener("click", closeSidebar);

// Reset on resize
window.addEventListener("resize", () => {
  if (!isDesktop()) closeSidebar();
});


</script>

  

  {% block scripts %}{% endblock %}


</body>
</html>
